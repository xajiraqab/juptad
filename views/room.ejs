<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= roomName %> - <%= movieTitle %>
  </title>
  <meta name="description" content="Watch Moive Juptad">
</head>

<body>

  <link rel="stylesheet" href="/css/styles.css" />
  <link rel="stylesheet" href="/css/room.css" />


  <!-- ზედა ნავი -->
  <nav>
    <a href="/">
      <svg title="back" xmlns="http://www.w3.org/2000/svg" height="32px" viewBox="0 0 24 24" width="32px"
        fill="currentColor">
        <path d="M0 0h24v24H0V0z" fill="none" />
        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
      </svg>
    </a>


    <!-- შემოსული მომხმარებლები -->
    <div class="flex" style="margin: 0;  margin-left: auto; justify-content: start; font-size: 10px">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor">
        <path d="M0 0h24v24H0V0z" fill="none" />
        <path
          d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V18c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-1.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05.02.01.03.03.04.04 1.14.83 1.93 1.94 1.93 3.41V18c0 .35-.07.69-.18 1H22c.55 0 1-.45 1-1v-1.5c0-2.33-4.67-3.5-7-3.5z" />
      </svg>
      <div id="users"></div>
    </div>

  </nav>


  <!-- ფილმის ინფო -->
  <main>
    <section>
      <img alt="poster" id="poster" width="185px" height="276px" src="" />
      <div>
        <h1 id="title"></h1>
        <p id="description"></p>
      </div>
    </section>

    <div class="flex">

      <!-- გაფილსკრინება -->
      <button id="btnFillscreen" class="flat">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor">
          <path d="M0 0h24v24H0V0z" fill="none" />
          <path
            d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z" />
        </svg>
        fillscreen
      </button>

      <!-- მთელ ეკრანზე გაშლა/დახურვა -->
      <button id="btnFullscreen" class="flat">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor">
          <path d="M0 0h24v24H0V0z" fill="none" />
          <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z" />
        </svg>
        fullscreen
      </button>



      <!-- ფილმის შეცვლა -->
      <button id="btnChangeMovie" class="flat" style="background: none">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor">
          <path d="M0 0h24v24H0V0z" fill="none" />
          <path
            d="M4 6.47L5.76 10H20v8H4V6.47M22 4h-4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4z" />
        </svg>
        change movie
      </button>

    </div>
  </main>


  <div class="videoContainer">

    <video width="100%" height="100%" controls controlslist="nofullscreen" src=""></video>

    <!-- ემოჯების გამხსნელი ღილაკი -->
    <label class="btnOpenEmojis" for="btnToggleEmojis">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor">
        <path d="M0 0h24v24H0V0z" fill="none" />
        <path
          d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" />
      </svg>
    </label>

    <input id="btnToggleEmojis" type="checkbox" />
    <label for="btnToggleEmojis" class="videoNonBlockCover"></label>
    <!-- ემოჯები -->
    <div class="emojis">
      <% for (const value of listEmojis) { %>
        <button><img width="64px" height="64px" src="/images/emojis/<%= value %>" alt="emoji" /></button>
        <% } %>
    </div>
  </div>




  <!-- ოთახში შესვლა -->
  <modal id="dlgJoin">
    <div>
      <h1>Hi <%= username %>
      </h1>
      <p>„<%= movieTitle %>“?</p>
      <button id="btnJoin"><img alt="join q" width="64px" height="64px" src="/images/play-button.png" /></button>
    </div>
  </modal>





  <!-- აქ ნთავსდება ემოციები და შეტყობინებები -->
  <div id="floatingEmojisContainer"></div>


  <!-- ფილმის შეცვლა -->
  <modal id="dlgChangeMovie">
    <form>
      <h1>Change Movie<span class="loading"></span></h1>
      <input id="txtMovieUrl" autofocus placeholder="URL From Adjaranet.ge Or Imovies.cc" />
    </form>
  </modal>


  <script>
    const roomName = '<%= roomName %>'
    const user = { username: '<%= username %>' }
  </script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/toast.js"></script>
  <script src="/js/room.js"></script>

</body>

</html>